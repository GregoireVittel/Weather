<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0f2847 0%, #1e3c72 100%); padding: 20px; min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); border-radius: 20px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
        h1 { color: white; text-align: center; margin-bottom: 5px; font-size: 1.5em; }
        .location { text-align: center; color: white; margin-bottom: 20px; font-size: 1.8em; font-weight: 600; }
        .controls { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 25px; flex-wrap: wrap; }
        .city-boxes { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }
        .city-box { padding: 15px 25px; background: rgba(255,255,255,0.1); border: 3px solid rgba(255,255,255,0.3); border-radius: 12px; color: white; cursor: pointer; transition: all 0.3s; text-align: center; min-width: 180px; }
        .city-box:hover { background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.6); transform: translateY(-2px); }
        .city-box.active { background: rgba(135, 206, 235, 0.3); border-color: #87CEEB; box-shadow: 0 0 20px rgba(135, 206, 235, 0.4); }
        .city-name { font-size: 1.2em; font-weight: bold; margin-bottom: 5px; }
        .city-country { font-size: 0.9em; opacity: 0.9; }
        .unit-buttons { display: flex; gap: 10px; }
        .unit-toggle { padding: 10px 20px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); border-radius: 10px; color: white; font-size: 1em; cursor: pointer; transition: all 0.3s; font-weight: 600; }
        .unit-toggle:hover { background: rgba(255,255,255,0.2); }
        .unit-toggle.active { background: #FFD700; color: #1e3c72; }
        .loading, .error { text-align: center; padding: 50px; font-size: 1.5em; color: white; }
        .error { color: #ff6b6b; }
        .current-weather { background: rgba(255,255,255,0.1); color: white; padding: 15px 20px; border-radius: 15px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center; gap: 20px; }
        .current-main { display: flex; align-items: center; gap: 20px; }
        .current-temp { font-size: 3em; font-weight: bold; color: #FFD700; }
        .current-condition { font-size: 1em; color: #87CEEB; font-weight: 600; }
        .current-details { display: flex; gap: 20px; }
        .detail-item { background: rgba(255,255,255,0.15); padding: 10px 15px; border-radius: 8px; text-align: center; min-width: 80px; }
        .detail-label { font-size: 0.85em; }
        .detail-value { font-size: 1.2em; font-weight: bold; margin-top: 3px; }
        h2 { color: white; margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 3px solid rgba(255,255,255,0.3); }
        .hourly-forecast { max-height: 600px; overflow-y: auto; border-radius: 10px; }
        .hour-header { background: rgba(15,40,71,0.9); color: #87CEEB; border-radius: 10px 10px 0 0; padding: 12px 15px; display: grid; grid-template-columns: 80px 40px 80px 70px 70px 70px 70px; gap: 10px; font-weight: bold; font-size: 0.95em; position: sticky; top: 0; z-index: 10; }
        .hour-card { background: rgba(255,255,255,0.1); color: white; padding: 10px 15px; border-bottom: 1px solid rgba(255,255,255,0.1); display: grid; grid-template-columns: 80px 40px 80px 70px 70px 70px 70px; gap: 10px; }
        .hour-card:hover { background: rgba(255,255,255,0.15); }
        .hour-time { font-size: 0.9em; }
        .hour-icon { font-size: 1.5em; text-align: center; }
        .hour-temp { font-size: 1.4em; font-weight: bold; color: #FFD700; }
        .hour-detail { font-size: 1.4em; font-weight: 600; text-align: center; }
        .day-header { background: rgba(15,40,71,0.9); color: #87CEEB; border-radius: 10px 10px 0 0; padding: 12px 15px; display: grid; grid-template-columns: 100px 40px 80px auto 60px 60px 60px; gap: 10px; font-weight: bold; font-size: 0.95em; }
        .day-card { background: rgba(255,255,255,0.1); color: white; padding: 15px 20px; border: 1px solid rgba(255,255,255,0.2); border-top: none; display: grid; grid-template-columns: 100px 40px 80px auto 60px 60px 60px; gap: 15px; }
        .day-card:last-child { border-radius: 0 0 10px 10px; }
        .day-card:hover { background: rgba(255,255,255,0.15); }
        .day-name { font-weight: bold; font-size: 1.1em; }
        .day-date { font-size: 0.9em; opacity: 0.8; }
        .day-icon { font-size: 2em; text-align: center; }
        .day-temps { display: flex; gap: 10px; font-size: 1.2em; }
        .temp-max { font-weight: bold; color: #FFD700; }
        .temp-min { color: #87CEEB; }
        .day-detail { text-align: center; font-size: 0.9em; }
        @media (max-width: 768px) {
            .controls { flex-direction: column; }
            .city-boxes { flex-direction: column; width: 100%; }
            .city-box { width: 100%; }
            .unit-buttons { width: 100%; justify-content: center; }
            .unit-toggle { flex: 1; max-width: 150px; }
            .current-weather { flex-direction: column; }
            .hour-header, .hour-card { grid-template-columns: 60px 30px 50px 45px 45px 50px; padding: 8px 5px; gap: 4px; }
            .hour-header > div:nth-child(7), .hour-card > div:nth-child(7) { display: none; }
            .day-header, .day-card { grid-template-columns: 70px 35px 75px 1fr 50px; gap: 5px; }
            .day-header > div:nth-child(6), .day-header > div:nth-child(7), .day-card > div:nth-child(6), .day-card > div:nth-child(7) { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ¤ï¸ Weather Forecast</h1>
        <div class="location" id="location">Croissy-sur-Seine, France</div>
        <div class="controls">
            <div class="city-boxes">
                <div class="city-box active" data-lat="48.8797" data-lon="2.1439" data-tz="Europe/Paris" data-name="Croissy-sur-Seine, France">
                    <div class="city-name">ğŸ‡«ğŸ‡· Croissy-sur-Seine</div>
                    <div class="city-country">France</div>
                </div>
                <div class="city-box" data-lat="40.1957" data-lon="-74.1682" data-tz="America/New_York" data-name="Farmingdale, New Jersey, USA">
                    <div class="city-name">ğŸ‡ºğŸ‡¸ Farmingdale</div>
                    <div class="city-country">New Jersey, USA</div>
                </div>
            </div>
            <div class="unit-buttons">
                <button class="unit-toggle active" id="metricBtn">Â°C</button>
                <button class="unit-toggle" id="imperialBtn">Â°F</button>
            </div>
        </div>
        <div id="loading" class="loading">Loading...</div>
        <div id="error" class="error" style="display:none;"></div>
        <div id="current-weather" style="display:none;"></div>
        <div id="hourly-section" style="display:none;"><h2>ğŸ“Š Hourly Forecast</h2><div class="hourly-forecast"><div id="hourly-forecast"></div></div></div>
        <div id="daily-section" style="display:none;"><h2>ğŸ“… 7-Day Forecast</h2><div id="daily-forecast"></div></div>
    </div>
    <script>
        let latitude=48.8797,longitude=2.1439,timezone='Europe/Paris',currentUnits='metric';
        const weatherCodes={0:{description:'Clear sky',iconDay:'â˜€ï¸',iconNight:'ğŸŒ™'},1:{description:'Mainly clear',iconDay:'ğŸŒ¤ï¸',iconNight:'ğŸŒ™'},2:{description:'Partly cloudy',iconDay:'â›…',iconNight:'â˜ï¸'},3:{description:'Overcast',iconDay:'â˜ï¸',iconNight:'â˜ï¸'},45:{description:'Fog',iconDay:'ğŸŒ«ï¸',iconNight:'ğŸŒ«ï¸'},51:{description:'Light drizzle',iconDay:'ğŸŒ¦ï¸',iconNight:'ğŸŒ§ï¸'},61:{description:'Light rain',iconDay:'ğŸŒ§ï¸',iconNight:'ğŸŒ§ï¸'},63:{description:'Rain',iconDay:'ğŸŒ§ï¸',iconNight:'ğŸŒ§ï¸'},71:{description:'Light snow',iconDay:'ğŸŒ¨ï¸',iconNight:'ğŸŒ¨ï¸'},80:{description:'Light showers',iconDay:'ğŸŒ¦ï¸',iconNight:'ğŸŒ§ï¸'},95:{description:'Thunderstorm',iconDay:'â›ˆï¸',iconNight:'â›ˆï¸'}};
        function getWeatherIcon(code,dateString){const weather=weatherCodes[code]||{iconDay:'ğŸŒ¡ï¸',iconNight:'ğŸŒ¡ï¸'};const date=new Date(dateString);const hour=date.getHours();return(hour<6||hour>=20)?weather.iconNight:weather.iconDay;}
        function getWeatherDescription(code){return(weatherCodes[code]||{description:'Unknown'}).description;}
        function formatDateTime(dateString){const date=new Date(dateString);const dayName=date.toLocaleDateString('fr-FR',{weekday:'short'});const time=date.toLocaleTimeString('fr-FR',{hour:'2-digit',minute:'2-digit',hour12:false});return `${dayName} ${time}`;}
        function formatDate(dateString){const date=new Date(dateString);return date.toLocaleDateString('fr-FR',{month:'short',day:'numeric'});}
        function getDayName(dateString){const date=new Date(dateString);const today=new Date();const tomorrow=new Date(today);tomorrow.setDate(tomorrow.getDate()+1);if(date.toDateString()===today.toDateString())return 'Today';if(date.toDateString()===tomorrow.toDateString())return 'Tomorrow';return date.toLocaleDateString('fr-FR',{weekday:'long'});}
        async function fetchWeather(){try{console.log('Fetching weather...');document.getElementById('loading').style.display='block';document.getElementById('error').style.display='none';const tempUnit=currentUnits==='imperial'?'&temperature_unit=fahrenheit':'';const windUnit=currentUnits==='imperial'?'&wind_speed_unit=mph':'';const precipUnit=currentUnits==='imperial'?'&precipitation_unit=inch':'';const url=`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,weather_code,relative_humidity_2m,precipitation,rain,cloud_cover,wind_speed_10m&hourly=temperature_2m,precipitation_probability,rain,weather_code,cloud_cover,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,rain_sum,wind_speed_10m_max,precipitation_probability_max&timezone=${encodeURIComponent(timezone)}${tempUnit}${windUnit}${precipUnit}`;console.log('URL:',url);const response=await fetch(url);if(!response.ok)throw new Error(`HTTP ${response.status}`);const data=await response.json();displayCurrentWeather(data.current);displayHourlyForecast(data.hourly);displayDailyForecast(data.daily);document.getElementById('loading').style.display='none';document.getElementById('current-weather').style.display='flex';document.getElementById('hourly-section').style.display='block';document.getElementById('daily-section').style.display='block';}catch(error){console.error('Error:',error);document.getElementById('loading').style.display='none';document.getElementById('error').style.display='block';document.getElementById('error').textContent=`Error: ${error.message}. Open console (F12) for details.`;}}
        function displayCurrentWeather(current){const icon=getWeatherIcon(current.weather_code,new Date().toISOString());const description=getWeatherDescription(current.weather_code);const tempUnit=currentUnits==='imperial'?'Â°F':'Â°C';const windUnit=currentUnits==='imperial'?'mph':'km/h';const precipUnit=currentUnits==='imperial'?'in':'mm';document.getElementById('current-weather').innerHTML=`<div class="current-main"><div class="hour-icon">${icon}</div><div><div class="current-temp">${Math.round(current.temperature_2m)}${tempUnit}</div><div class="current-condition">${description}</div></div></div><div class="current-details"><div class="detail-item"><div class="detail-label">ğŸ’§ Humidity</div><div class="detail-value">${current.relative_humidity_2m}%</div></div><div class="detail-item"><div class="detail-label">ğŸ’¨ Wind</div><div class="detail-value">${Math.round(current.wind_speed_10m)} ${windUnit}</div></div><div class="detail-item"><div class="detail-label">ğŸŒ§ï¸ Rain</div><div class="detail-value">${current.rain} ${precipUnit}</div></div><div class="detail-item"><div class="detail-label">â˜ï¸ Clouds</div><div class="detail-value">${current.cloud_cover}%</div></div></div>`;}
        function displayHourlyForecast(hourly){const container=document.getElementById('hourly-forecast');const now=new Date();const tempUnit=currentUnits==='imperial'?'Â°F':'Â°C';const precipUnit=currentUnits==='imperial'?'in':'mm';let html=`<div class="hour-header"><div>Time</div><div></div><div>Temp</div><div>ğŸ’§ Rain</div><div>ğŸŒ§ï¸ ${precipUnit}</div><div>ğŸ’¨ Wind</div><div>â˜ï¸ Cloud</div></div>`;let hoursDisplayed=0;for(let i=0;i<hourly.time.length&&hoursDisplayed<48;i++){const hourTime=new Date(hourly.time[i]);if(hourTime>now){const icon=getWeatherIcon(hourly.weather_code[i],hourly.time[i]);const time=formatDateTime(hourly.time[i]);html+=`<div class="hour-card"><div class="hour-time">${time}</div><div class="hour-icon">${icon}</div><div class="hour-temp">${Math.round(hourly.temperature_2m[i])}${tempUnit}</div><div class="hour-detail">${hourly.precipitation_probability[i]}%</div><div class="hour-detail">${hourly.rain[i]}</div><div class="hour-detail">${Math.round(hourly.wind_speed_10m[i])}</div><div class="hour-detail">${hourly.cloud_cover[i]}%</div></div>`;hoursDisplayed++;}}container.innerHTML=html;}
        function displayDailyForecast(daily){const container=document.getElementById('daily-forecast');const precipUnit=currentUnits==='imperial'?'in':'mm';const windUnit=currentUnits==='imperial'?'mph':'km/h';let html=`<div class="day-header"><div>Day</div><div></div><div>Temp</div><div>Condition</div><div>ğŸ’§ Rain</div><div>ğŸŒ§ï¸ ${precipUnit}</div><div>ğŸ’¨ ${windUnit}</div></div>`;for(let i=0;i<7;i++){const icon=getWeatherIcon(daily.weather_code[i],daily.time[i]+'T12:00:00');const description=getWeatherDescription(daily.weather_code[i]);const dayName=getDayName(daily.time[i]);const date=formatDate(daily.time[i]);html+=`<div class="day-card"><div class="day-name-date"><div class="day-name">${dayName}</div><div class="day-date">${date}</div></div><div class="day-icon">${icon}</div><div class="day-temps"><span class="temp-max">${Math.round(daily.temperature_2m_max[i])}${currentUnits==='imperial'?'Â°F':'Â°C'}</span><span class="temp-min">${Math.round(daily.temperature_2m_min[i])}${currentUnits==='imperial'?'Â°F':'Â°C'}</span></div><div class="day-condition">${description}</div><div class="day-detail">${daily.precipitation_probability_max[i]}%</div><div class="day-detail">${daily.rain_sum[i]}</div><div class="day-detail">${Math.round(daily.wind_speed_10m_max[i])}</div></div>`;}container.innerHTML=html;}
        document.querySelectorAll('.city-box').forEach(box=>{box.addEventListener('click',function(){document.querySelectorAll('.city-box').forEach(b=>b.classList.remove('active'));this.classList.add('active');latitude=parseFloat(this.dataset.lat);longitude=parseFloat(this.dataset.lon);timezone=this.dataset.tz;document.getElementById('location').textContent=this.dataset.name;fetchWeather();});});
        document.getElementById('metricBtn').addEventListener('click',function(){if(currentUnits!=='metric'){currentUnits='metric';document.getElementById('metricBtn').classList.add('active');document.getElementById('imperialBtn').classList.remove('active');fetchWeather();}});
        document.getElementById('imperialBtn').addEventListener('click',function(){if(currentUnits!=='imperial'){currentUnits='imperial';document.getElementById('imperialBtn').classList.add('active');document.getElementById('metricBtn').classList.remove('active');fetchWeather();}});
        fetchWeather();
    </script>
</body>
</html>